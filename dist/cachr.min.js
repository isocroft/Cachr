/*!
 *
 * File: cachr.js
 * Author: Ifeora Okechukwu (https://twitter.com/isocroft)
 * Version: 0.2.2
 *
 * Desc: Implements Application Cache with an easy interface
 *	 	for browsers with native support (no polyfills)
 *
 * Support: IE10+, Saf4+, FF3.5+, Opr11.6+, Chrm4+
 *
 */
window.Cachr=window.applicationCache&&function(e,t,n){function o(h){var f=e.document.readyState;return-1==f.search(u)?n:("function"==typeof o.__fn&&o.__fn(h),t.onreadystatechange=null,u=l,l=e.document.createElement("iframe"),l.id=l.name="__app_cache",l.style.cssText="display:none;position:absolute;left:-9999px;",l.src=r+"/"+(o.__offlineFilePath?o.__offlineFilePath:"offline.html"),e.document.body.appendChild(l),void(l.onload=function(t){frameWin=l.contentWindow||l.contentDocument.defaultView,c=frameWin.applicationCache,c&&(c.onchecking=function(e){a(this)},c.onnoupdate=function(e){i=48e5,a(this)},c.ondownloading=function(e){s="0%",l.setAttribute("data-cache-progress",s),a(e)},c.onprogress=function(e){s=e.loaded/e.total*100+"%",l.setAttribute("data-cache-progress",s),a(this)},c.oncached=function(e){"100%"!==s&&(s="100%",l.setAttribute("data-cache-progress",s)),a(this)},c.onupdateready=function(t){var n=confirm("This App has been updated against your cache. \n		 Would you like to refresh your browser to get this update?");d=setInterval(function(t,n){return t&&e.location.reload(),function(){n.update()}}(n,c),i),a(this)},c.onerror=c.onobselete=function(e){clearInterval(d),c.swapCache(),a(this)})}))}function a(t){switch(t.status){case 0:e.console.log("Cache Status: Uncached");break;case 1:e.console.log("Cache Status: Idle");break;case 2:e.console.log("Cache Status: Checking");break;case 3:e.console.log("Cache Status: Downloading");break;case 4:e.console.log("Cache Status: UpdateReady");break;case 5:e.console.log("Cache Status: Obsolete")}}var c=null,i=36e5,s=-1,l=null,r=e.location.origin,u=/^complete$/,d=-1;return{go:function(e){var n=t.onreadystatechange;"function"==typeof n&&(o.__fn=n),e&&"object"==typeof e&&(o.__offlineFilePath=e.offline_file_path),"complete"!=t.readyState?t.onreadystatechange=o:o({})}}}(this,this.document);
