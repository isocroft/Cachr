/*!
 *
 * File: cachr.js
 * Author: Ifeora Okechukwu
 * Version: 0.2.1
 *
 * Desc: Implements Application Cache with an easy interface
 *	 	for browsers with native support (no polyfills)
 *
 * Support: IE10+, Saf4+, FF3.5+, Opr11.5+, Chrm5+
 *
 */
window.Cachr=window.applicationCache&&function(n){function l(){var s=n.document.readyState;s.search(e)==-1&&setTimeout(arguments.callee,0),e=t,t=n.document.createElement("iframe"),t.id=t.name="__app_cache",t.style.cssText="display:none;position:absolute;left-9999px;",t.src=c+"/offline.html",n.document.body.appendChild(t),t.onload=function(){var s="data-cache-progress";(frameWin=t.contentWindow||t.contentDocument.defaultView,i=frameWin.applicationCache,i)&&(i.onchecking=function(){u(this)},i.onnoupdate=function(){f=48e5,u(this)},i.ondownloading=function(n){r="0%",t.setAttribute(s,r),u(n)},i.onprogress=function(n){r=n.loaded/n.total*100+"%",t.setAttribute(s,r),u(this)},i.oncached=function(){r!=="100%"&&(r="100%",t.setAttribute(s,r)),u(this)},i.onupdateready=function(){var r=confirm("This App has been updated against your cache. \n \t\t\t\t\t\t\t\t\b Would you like to refresh your browser to get this update?");o=setInterval(function(t,i){return t&&n.location.reload(),function(){i.update()}}(r,i),f),u(this)},i.onerror=i.onobselete=function(){clearInterval(o),i.swapCache(),u(this)})}}function u(t){switch(t.status){case 0:n.console.log("Cache Status: Uncached");break;case 1:n.console.log("Cache Status: Idle");break;case 2:n.console.log("Cache Status: Checking");break;case 3:n.console.log("Cache Status: Downloading");break;case 4:n.console.log("Cache Status: UpdateReady");break;case 5:n.console.log("Cache Status: Obsolete")}}var i=null,f=36e5,r=-1,t=null,s=n.location,c=(s.origin || s.protocol + '//' + s.host),e=/^(load|complet)/,o=-1;return{go:function(){setTimeout(l,0)}}}(this)
