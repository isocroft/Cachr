/*!
 *
 * File: cachr.js
 * Author: Ifeora Okechukwu
 * Version: 0.2.1
 *
 * Desc: Implements Application Cache with an easy interface
 *	 	for browsers with native support (no polyfills)
 *
 * Support: IE10+, Saf4+, FF3.5+, Opr11.5+, Chrm5+
 *
 */
window.Cachr=window.applicationCache&&function(e){function t(){var t=e.document.readyState;return-1==t.search(r)?setTimeout(arguments.callee,0):(r=s,s=e.document.createElement("iframe"),s.id=s.name="__app_cache",s.style.cssText="display:none;position:absolute;left:-9999px;",s.src=i+"/offline.html",e.document.body.appendChild(s),void(s.onload=function(t){frameWin=s.contentWindow||s.contentDocument.defaultView,n=frameWin.applicationCache,n&&(n.onchecking=function(e){o(this)},n.onnoupdate=function(e){a=48e5,o(this)},n.ondownloading=function(e){c="0%",s.setAttribute("data-cache-progress",c),o(e)},n.onprogress=function(e){c=e.loaded/e.total*100+"%",s.setAttribute("data-cache-progress",c),o(this)},n.oncached=function(e){"100%"!==c&&(c="100%",s.setAttribute("data-cache-progress",c)),o(this)},n.onupdateready=function(t){var c=confirm("This App has been updated against your cache. \n 								\b Would you like to refresh your browser to get this update?");l=setInterval(function(t,o){return t&&e.location.reload(),function(){o.update()}}(c,n),a),o(this)},n.onerror=n.onobselete=function(e){clearInterval(l),n.swapCache(),o(this)})}))}function o(t){switch(t.status){case 0:e.console.log("Cache Status: Uncached");break;case 1:e.console.log("Cache Status: Idle");break;case 2:e.console.log("Cache Status: Checking");break;case 3:e.console.log("Cache Status: Downloading");break;case 4:e.console.log("Cache Status: UpdateReady");break;case 5:e.console.log("Cache Status: Obsolete")}}var n=null,a=36e5,c=-1,s=null,i=e.location.origin||e.location.protocol+"//"+e.location.host,r=/^(load|complet)/,l=-1;return{go:function(){setTimeout(t,0)}}}(this);
